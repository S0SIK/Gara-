<html lang="pl">

<head>
  <meta charset="UTF-8">
  <meta name="garaz">
  <title>WoTC-Garage</title>
  <link rel="stylesheet" href="styl.css" type="text/css" />
  <script src="jquery-3.6.0.min.js"></script>
  <script type="text/javascript">
    const Game_id = `1073747782`
    const API_id = `10a871f6fab9f5647fdb2d0a433a0910`

    fetch('tanks.json')
      .then(response => response.json())
      .then(data => {
        let mySelectedData = [];
        const keys = Object.keys(data)

        for (let i = 0; i < Object.keys(data).length; i++) {
          const inner = data[keys[i]];
          const innerKeys = Object.keys(inner);

          for (let j = 0; j < Object.keys(inner).length; j++) {
            const inner2 = inner[innerKeys[j]];
            if (Object.keys(inner2).length !== 0) {

              for (const [key, value] of Object.entries(inner2)) {
                mySelectedData[key] = value;
              }
            }
          }
        }
        for (const [key, value] of Object.entries(mySelectedData)) {
          const API_tanks = `https://api-console.worldoftanks.com/wotx/encyclopedia/vehicles/?application_id=${API_id}&tank_id=${key}`
          fetch(API_tanks)
            .then(response => response.json())
            .then(data => {
              const short_name = data.data[key].short_name
              const big_icon = data.data[key].images.big_icon
              const tier = data.data[key].tier
              const premium = data.data[key].is_premium
              const nacja = data.data[key].nation
              const klasa = data.data[key].type
              const API_player = `https://api-console.worldoftanks.com/wotx/tanks/stats/?application_id=${API_id}&account_id=${Game_id}&tank_id=${key}`
              fetch(API_player)
                .then(response => response.json())
                .then(data => {
                  const htm = `<div class="siatka" id="${key}" type="button" onclick="Tank()"><div class="${premium}"><h1 class="logo2">${short_name}</h1><img src="${big_icon}" width="272" height="152
              "></img></br><div class="logo3">     <img src="img/${tier}.png" width="40" height="40">    <img src="img/filter_flag_${nacja}.png" width="40" height="40"></img>     <img src="img/${klasa}.gif" width="56" height="40"></img></div></div>`;
                  document
                    .getElementById("tank")
                    .insertAdjacentHTML("beforeend", htm);
                })
            })
        }
      });
    function Tank() {
      const htm2 = `<div class="siatka"><img src="img/siatka.png">Tank</img></div>`
      document
        .getElementById(`okno`)
        .insertAdjacentHTML("beforeend", htm2);

    }
    $(document).ready(function () {
      var NavY = $('.filtr').offset().top;

      var stickyNav = function () {
        var ScrollY = $(window).scrollTop();

        if (ScrollY > NavY) {
          $('.filtr').addClass('sticky');
        } else {
          $('.filtr').removeClass('sticky');
        }
      };

      stickyNav();

      $(window).scroll(function () {
        stickyNav();
      });
    });
  </script>

<body>
  <div class="all" id="okno">
    <div class="filtr">
      <div class="lista"></div>
      <ol>
        <li><a>Tier:</a></li>
        <li><a>Nacja:</a></li>
        <li><a>Klasa:</a></li>
        <li><a>Premium:</a></li>
        <li><a>Liga:</a></li>
      </ol>
      <div class="opcje"></div>
      <select id="Tier">
        <div>
          <option value="All" id="tier" select>All</option>
        </div>
        <div>
          <option value="1" id="tier">I</option>
        </div>
        <div>
          <option value="2" id="tier">II</option>
        </div>
        <div>
          <option value="3" id="tier">III</option>
        </div>
        <div>
          <option value="4" id="tier">IV</option>
        </div>
        <div>
          <option value="5" id="tier">V</option>
        </div>
        <div>
          <option value="6" id="tier">VI</option>
        </div>
        <div>
          <option value="7" id="tier">VII</option>
        </div>
        <div>
          <option value="8" id="tier">VIII</option>
        </div>
        <div>
          <option value="9" id="tier">IX</option>
        </div>
        <div>
          <option value="10" id="tier">X</option>
        </div>
      </select>
      <select>
        <option value="All" id="nacja" selected>All</option>
        <option value="USA" id="nacja">USA</option>
        <option value="ZSRR" id="nacja">ZSRR</option>
        <option value="Niemieckie" id="nacja">Niemieckie</option>
        <option value="Brytyjskie" id="nacja">Brytyjskie</option>
        <option value="Francuskie" id="nacja">Francuskie</option>
        <option value="Chińskie" id="nacja">Chińskie</option>
        <option value="Japońskie" id="nacja">Japońskie</option>
        <option value="Czechosłowackie" id="nacja">Czechosłowackie</option>
        <option value="Szweckie" id="nacja">Szweckie</option>
        <option value="Polskie" id="nacja">Polskie</option>
        <option value="Woskie" id="nacja">Woskie</option>
        <option value="Najemnice" id="nacja">Najemnice</option>
      </select>
      <select>
        <option value="All" id="klasa" selected>All</option>
        <option value="LT" id="klasa">LT</option>
        <option value="MT" id="klasa">MT</option>
        <option value="HT" id="klasa">HT</option>
        <option value="TD" id="klasa">TD</option>
        <option value="Arta" id="klasa">Arta</option>
      </select>
      <select>
        <option value="All" id="" selected>All</option>
        <option value="Tak">Tak</option>
        <option value="Nie">Nie</option>
      </select>
      <select>
        <option value="All" id=selected>All</option>
        <option value="Tak">Tak</option>
        <option value="Nie">Nie</option>
      </select>
    </div>
    <div class="wstep">
      <div class="logo">Garaż gracza: S0SIK</div>
    </div>
    <div class="tanks">
      <div class=tank id="tank"></div>
    </div>
  </div>
</body>

</html>
